// ç¾ç»ŠæŸ¥è¯¢é¡µé¢è„šæœ¬

// ç¾ç»Šæ•°æ®
const traitsData = {
    region: [
        { name: 'æ¯”å°”å‰æ²ƒç‰¹', icon: 'ğŸ´â€â˜ ï¸', description: 'æ¯å›åˆè·å¾—é“¶è›‡å¸ï¼Œå‡»æ€è·å¾—2é“¶è›‡å¸ã€‚(3)15å¸ (5)30å¸+å‡çº§é»‘å¸‚ (7)60å¸+å‡çº§é»‘å¸‚ (10)100å¸+å¼€ç«' },
        { name: 'è‰¾æ¬§å°¼äºš', icon: 'ğŸŒ¸', description: 'éšæœºä»å››æ¡å¼ºåŒ–ä¹‹è·¯ä¸­é€‰æ‹©ä¸€æ¡ã€‚ç²¾ç¥ï¼šæ–½æ³•æ—¶å…¨é˜Ÿè·å¾—3%åŒæ”»ã€‚è¶…è¶Šï¼šæ³•ä¼¤+ç”Ÿå‘½å€¼ã€‚åˆ€é”‹ï¼šæ”»å‡»åŠ›+æ”»é€Ÿã€‚ç¹è£ï¼šè·å¾—é‡‘å¸ã€‚é¢†æ‚Ÿï¼šæŠ€èƒ½ä¼¤å®³+' },
        { name: 'çº¦å¾·å°”äºº', icon: 'ğŸ„', description: 'æ¯ä¸Šåœº1ä¸ªçº¦å¾·å°”äººï¼Œå…¨é˜Ÿè·å¾—50ç”Ÿå‘½å€¼å’Œ7%æ”»é€Ÿã€‚(2)åŸºç¡€æ•ˆæœ (4)å•†åº—å¿…åˆ·çº¦å¾·å°” (6)æ¯å›åˆ2æ¬¡å…è´¹åˆ·æ–° (8)æ¯å›åˆè·å¾—ç¦è¢‹' },
        { name: 'å¼—é›·å°”å“å¾·', icon: 'â„ï¸', description: 'å¬å”¤å†°éœœä¹‹å¡”ï¼Œå¡”å‰è·å¾—ç”Ÿå‘½å€¼ï¼Œå¡”åè·å¾—ä¼¤å®³ã€‚å¼—é›·å°”å“å¾·æ•ˆæœ+150%ã€‚(3)8%ç”Ÿå‘½+10%ä¼¤å®³ (5)ä¸¤åº§å¡”+12%ç”Ÿå‘½+16%ä¼¤å®³ (7)å¡”ç ´å†»ç»“1.5ç§’+16%ç”Ÿå‘½+22%ä¼¤å®³' },
        { name: 'ä»¥ç»ªå¡”å°”', icon: 'ğŸ’', description: 'å®Œæˆä»»åŠ¡è·å–ç¢ç‰‡å…‘æ¢å¥–åŠ±ã€‚(3)é€‰æ‹©ä»»åŠ¡è·å–ç¢ç‰‡ (5)å›åˆå¼€å§‹æ¢å¤2ç©å®¶ç”Ÿå‘½å€¼ (7)æˆ˜æ–—èƒœåˆ©è·å¾—50ç¢ç‰‡+é¢å¤–å¥–åŠ±' },
        { name: 'è¯ºå…‹è¨æ–¯', icon: 'ğŸª“', description: 'æ•Œæ–¹ç”Ÿå‘½å€¼æŸå¤±è¾¾åˆ°é˜ˆå€¼å¬å”¤å„å¡”æ±—ï¼Œå¼ºåº¦éšæ˜Ÿçº§æå‡ã€‚(3)50%ç”Ÿå‘½å€¼ (5)40%ç”Ÿå‘½å€¼ (7)30%ç”Ÿå‘½å€¼ (10)å¬å”¤è¶…å¼ºå„å¡”æ±—' },
        { name: 'çš®å°”ç‰¹æ²ƒå¤«', icon: 'âš™ï¸', description: 'è·å¾—ç§‘æŠ€è£…å¤‡åŠ æˆã€‚æ€»æ˜Ÿçº§è¾¾æ ‡è§£é”æµ·å…‹æ–¯éœ¸ç‹é¾™ã€‚(2)è£…å¤‡+1å±æ€§ (4)è£…å¤‡+2å±æ€§ (6)è£…å¤‡+3å±æ€§ (9æ˜Ÿ)è§£é”éœ¸ç‹é¾™' },
        { name: 'æš—å½±å²›', icon: 'ğŸ‘»', description: 'å¼ˆå­æ­»äº¡è·å¾—çµé­‚ï¼ŒæŠ€èƒ½æ ¹æ®çµé­‚æ•°é‡å¼ºåŒ–ã€‚(3)æ”¶é›†çµé­‚ (5)çµé­‚æ•ˆæœ+50% (7)çµé­‚æ•ˆæœ+100% (150çµé­‚)è§£é”é”¤çŸ³' },
        { name: 'æ•ç‘ç›', icon: 'ğŸœï¸', description: 'æˆ˜æ–—å¼€å§‹é£å‡ï¼Œè·å¾—æœ€å¤§ç”Ÿå‘½å€¼ã€åŒæŠ—å’Œç”Ÿå‘½æ¢å¤ã€‚(2)8%ç”Ÿå‘½+8åŒæŠ— (3)12%ç”Ÿå‘½+12åŒæŠ— (4)å…¨å‘˜ä¸‰æ˜Ÿ+è¶…å¼ºå±æ€§' },
        { name: 'å·¨ç¥å³°', icon: 'â­', description: 'æ²¡æœ‰ç¾ç»Šæ ‡ç­¾ä½†æ•´ä½“å¼ºäºæ™®é€šå¼ˆå­ã€‚(5ä¸ªç‹¬ç‰¹å·¨ç¥å³°)è§£é”é¾™ç‹ã€‚é¾™ç‹æ¯250ä¼¤å®³å 1å±‚æ˜Ÿå°˜ï¼Œ500å±‚é”æ­»å†³èµ›åœˆ' },
        { name: 'è™šç©º', icon: 'ğŸ‘ï¸', description: 'è·å¾—ä¸ç¨³å®šçš„çªå˜æ•ˆæœå’Œæ”»é€Ÿã€‚(2)1ä¸ªçªå˜+15%æ”»é€Ÿ (4)2ä¸ªçªå˜+30%æ”»é€Ÿ (6)3ä¸ªçªå˜+50%æ”»é€Ÿ (10)è§£é”çº³ä»€ç”·çˆµ' },
        { name: 'ç¥–å®‰', icon: 'â˜ ï¸', description: 'è·å¾—åŒ–å­¦æ”¹é€ åŠ æˆï¼Œæå‡ç”Ÿå­˜èƒ½åŠ›å’Œè¾“å‡ºã€‚(2)8%ç”Ÿå‘½+8%ä¼¤å®³ (4)15%ç”Ÿå‘½+15%ä¼¤å®³ (6)25%ç”Ÿå‘½+25%ä¼¤å®³' },
        { name: 'å¾·ç›è¥¿äºš', icon: 'âš”ï¸', description: 'è·å¾—æŠ¤ç”²å’Œé­”æŠ—ã€‚ç”Ÿå‘½å€¼æŸå¤±25%è§¦å‘é‡æŒ¯æ——é¼“ã€‚(3)20åŒæŠ— (5)35åŒæŠ—+é‡æŒ¯æ——é¼“ (7)50åŒæŠ—+é‡æŒ¯æ——é¼“ (11)è¶…å¼ºåŒæŠ—+å…‰æ˜è£…å¤‡' }
    ],
    class: [
        { name: 'æ³•å¸ˆ', icon: 'ğŸ”®', description: 'å…¨é˜Ÿè·å¾—æ³•æœ¯åŠ æˆï¼Œæ³•å¸ˆè·å¾—æ›´å¤šã€‚(2)å…¨é˜Ÿ18%ï¼Œæ³•å¸ˆ25% (4)å…¨é˜Ÿ25%ï¼Œæ³•å¸ˆ40% (6)å…¨é˜Ÿ40%ï¼Œæ³•å¸ˆ60%' },
        { name: 'ç¥è°•è€…', icon: 'ğŸ”®', description: 'å…¨é˜Ÿè·å¾—1æ³•åŠ›å›å¤ï¼Œç¥è°•è€…ä»æ‰€æœ‰æ¥æºè·å¾—æ›´å¤šæ³•åŠ›å€¼ã€‚(2)25%é¢å¤–æ³•åŠ› (4)40%é¢å¤–æ³•åŠ›' },
        { name: 'ç‹™ç¥', icon: 'ğŸ¯', description: 'è·å¾—ä¼¤å®³å¢å¹…ï¼Œå¯¹è·ç¦»æ›´è¿œçš„ç›®æ ‡é€ æˆæ›´é«˜ä¼¤å®³ã€‚(2)18%+æ¯æ ¼2% (3)24%+æ¯æ ¼3% (4)28%+æ¯æ ¼4% (5)32%+æ¯æ ¼5%' },
        { name: 'æªæ‰‹', icon: 'ğŸ”«', description: 'è·å¾—ç‰©ç†åŠ æˆï¼Œæ¯ç¬¬4æ¬¡æ”»å‡»é€ æˆé¢å¤–ç‰©ç†ä¼¤å®³ã€‚(2)20%ç‰©ç†+100ä¼¤å®³ (4)35%ç‰©ç†+200ä¼¤å®³' },
        { name: 'è¿…å‡»æˆ˜å£«', icon: 'âš¡', description: 'å…¨é˜Ÿè·å¾—15%æ”»é€Ÿï¼Œè¿…å‡»æˆ˜å£«åŸºäºç›®æ ‡å·²æŸå¤±ç”Ÿå‘½å€¼è·å¾—é¢å¤–æ”»é€Ÿã€‚(2)10-30%æ”»é€Ÿ (3)20-45%æ”»é€Ÿ (4)30-60%æ”»é€Ÿ (5)40-80%æ”»é€Ÿ' },
        { name: 'å¾æœè€…', icon: 'ğŸ’ª', description: 'æŠ€èƒ½å¯ä»¥æš´å‡»ï¼Œè·å¾—é¢å¤–æš´å‡»ç‡å’Œæš´å‡»ä¼¤å®³ã€‚(2)15%æš´å‡» (3)20%æš´å‡» (4)25%æš´å‡» (5)30%æš´å‡»' },
        { name: 'æŠ¤å«', icon: 'ğŸ›¡ï¸', description: 'å…¨é˜Ÿè·å¾—12åŒæŠ—ï¼ŒæŠ¤å«è·å¾—æ›´å¤šã€‚(2)30åŒæŠ— (4)55åŒæŠ— (6)80åŒæŠ—' },
        { name: 'ä¸»å®°', icon: 'ğŸ‘¹', description: 'è·å¾—ä¼¤å®³å‡å…ï¼Œç”Ÿå‘½å€¼é«˜äº50%æ—¶æ•ˆæœæå‡ã€‚ä¸»å®°é˜µäº¡æ—¶å…¶ä»–ä¸»å®°å›è¡€5%æœ€å¤§ç”Ÿå‘½å€¼ã€‚(2)18%æˆ–25% (4)20%æˆ–30% (6)25%æˆ–33%' },
        { name: 'ç¥ç›¾ä½¿', icon: 'ğŸ›¡ï¸', description: 'ç”Ÿå‘½å€¼é¦–æ¬¡é™è‡³75%å’Œ25%æ—¶ï¼Œè·å¾—åŸºäºæœ€å¤§ç”Ÿå‘½å€¼çš„æŠ¤ç›¾ã€‚(2)16%ç”Ÿå‘½å€¼ (3)20%ç”Ÿå‘½å€¼ (4)26%ç”Ÿå‘½å€¼ (5)33%ç”Ÿå‘½å€¼' },
        { name: 'æ–—å£«', icon: 'ğŸ’ª', description: 'å…¨é˜Ÿè·å¾—150æœ€å¤§ç”Ÿå‘½å€¼ï¼Œæ–—å£«è·å¾—æ›´å¤šã€‚(2)25%ç”Ÿå‘½å€¼ (4)45%ç”Ÿå‘½å€¼ (6)65%ç”Ÿå‘½å€¼' },
        { name: 'è£å†³æˆ˜å£«', icon: 'âš”ï¸', description: 'è·å¾—å…¨èƒ½å¸è¡€å’Œç‰©ç†åŠ æˆã€‚åŸºäºå·²æŸå¤±ç”Ÿå‘½å€¼è·å¾—é¢å¤–ç‰©ç†åŠ æˆ(æœ€å¤š50%)ã€‚(2)22%ç‰©ç†+10%å¸è¡€ (4)33%ç‰©ç†+16%å¸è¡€ (6)44%ç‰©ç†+20%å¸è¡€' }
    ],
    special: [
        { name: 'é“¸æ˜Ÿé¾™ç‹', icon: 'ğŸ²', description: 'é¾™ç‹ä¸“å±ç¾ç»Šã€‚æ¯æœ‰1ä¸ªå…¶ä»–ç‹¬ç‰¹å·¨ç¥å³°å¼ˆå­ç™»åœºï¼Œé¾™ç‹è·å¾—20/60/100%æ˜Ÿå°˜å±‚æ•°åŠ æˆã€‚å æ˜Ÿå°˜å¼ºåŒ–æŠ€èƒ½ï¼Œ500å±‚é”æ­»å†³èµ›åœˆ' },
        { name: 'ç¬¦æ–‡æ³•å¸ˆ', icon: 'ğŸ“œ', description: 'ç‘å…¹ä¸“å±ç¾ç»Šã€‚éœ€æ¿€æ´»4ä¸ªåŸé‚¦ç¾ç»Šè§£é”ã€‚è§£é”åç‘å…¹è·å¾—è¶…å¼ºå±æ€§å’ŒæŠ€èƒ½åŠ æˆ' },
        { name: 'ä¸è½é­”é”‹', icon: 'âš”ï¸', description: 'äºšæ’ä¸“å±ç¾ç»Šã€‚è¿ç»­æ–½æ³•25æ¬¡ç›´æ¥å‡»æ€ç›®æ ‡å¹¶å¯¹å‘¨å›´æ•Œäººé€ æˆç¾¤ä½“ä¼¤å®³' },
        { name: 'æš—è£”', icon: 'ğŸ˜ˆ', description: 'è£…å¤‡æš—è£”è£…å¤‡è·å¾—ã€‚æä¾›æ²»ç–—æ•ˆæœå’Œé¢å¤–ä¼¤å®³ï¼Œæˆ˜æ–—ä¸­æŒç»­å›è¡€' }
    ]
};

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    displayTraits();
});

// æ˜¾ç¤ºç¾ç»Š
function displayTraits() {
    displayRegionTraits();
    displayClassTraits();
    displaySpecialTraits();
}

// æ˜¾ç¤ºåŸé‚¦ç¾ç»Š
function displayRegionTraits() {
    const grid = document.getElementById('regionTraits');
    grid.innerHTML = '';
    
    traitsData.region.forEach(trait => {
        const heroes = getHeroesByTrait(trait.name);
        const card = createTraitCard(trait, heroes);
        grid.appendChild(card);
    });
}

// æ˜¾ç¤ºèŒä¸šç¾ç»Š
function displayClassTraits() {
    const grid = document.getElementById('classTraits');
    grid.innerHTML = '';
    
    traitsData.class.forEach(trait => {
        const heroes = getHeroesByTrait(trait.name);
        const card = createTraitCard(trait, heroes);
        grid.appendChild(card);
    });
}

// æ˜¾ç¤ºç‰¹æ®Šç¾ç»Š
function displaySpecialTraits() {
    const grid = document.getElementById('specialTraits');
    grid.innerHTML = '';
    
    traitsData.special.forEach(trait => {
        const heroes = getHeroesByTrait(trait.name);
        const card = createTraitCard(trait, heroes);
        grid.appendChild(card);
    });
}

// æ ¹æ®ç¾ç»Šè·å–è‹±é›„
function getHeroesByTrait(traitName) {
    return gameData.heroes.filter(hero => hero.traits.includes(traitName));
}

// åˆ›å»ºç¾ç»Šå¡ç‰‡
function createTraitCard(trait, heroes) {
    const card = document.createElement('div');
    card.className = 'trait-card';
    
    // æŒ‰è´¹ç”¨æ’åºè‹±é›„
    const sortedHeroes = heroes.sort((a, b) => a.cost - b.cost);
    
    // è‹±é›„æ–‡å­—åˆ—è¡¨ï¼ˆå¸¦è´¹ç”¨å’Œå›¾æ ‡ï¼‰
    const heroList = sortedHeroes.map(hero => 
        `<span class="hero-text-item">
            <span class="hero-mini-icon">${hero.icon}</span>
            <span class="hero-text-name">${hero.name}</span>
            <span class="hero-text-cost">(${hero.cost}è´¹)</span>
        </span>`
    ).join('');
    
    card.innerHTML = `
        <div class="trait-card-header">
            <div class="trait-icon-large">${trait.icon}</div>
            <h3 class="trait-card-name">${trait.name}</h3>
            <div class="trait-count">${heroes.length}ä¸ªè‹±é›„</div>
        </div>
        <div class="trait-card-body">
            <p class="trait-description">${trait.description}</p>
            <div class="trait-heroes">
                <h4>åŒ…å«è‹±é›„ï¼š</h4>
                <div class="hero-text-list">
                    ${heroList || '<span style="color: #888;">æš‚æ— è‹±é›„</span>'}
                </div>
            </div>
        </div>
    `;
    
    return card;
}
